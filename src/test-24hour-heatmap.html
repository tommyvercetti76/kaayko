<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test 24-Hour Heatmap</title>
    <link rel="stylesheet" href="scripts/components/Heatmap.css">
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #333; color: white; }
        .test-container { max-width: 1000px; margin: 0 auto; }
        h1 { text-align: center; color: #00ff88; }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>24-Hour Heatmap Test</h1>
        <div id="heatmapContainer"></div>
        
        <div style="margin-top: 20px; padding: 15px; border: 1px solid #555;">
            <h3>Expected Structure:</h3>
            <ul>
                <li><strong>Morning (6-11):</strong> 6 hourly tiles per day</li>
                <li><strong>Noon (12-17):</strong> 6 hourly tiles per day</li>
                <li><strong>Evening (18-23):</strong> 6 hourly tiles per day</li>
            </ul>
            <p>Total: <strong>18 tiles per day Ã— 3 days = 54 tiles</strong></p>
        </div>
    </div>

    <script src="scripts/components/Heatmap.js"></script>
    <script>
        // Simulate 24-hour API response
        function generate24HourData() {
            const forecastData = [];
            
            for (let day = 0; day < 3; day++) {
                const date = new Date();
                date.setDate(date.getDate() + day);
                
                const hourlyData = {};
                
                // Generate data for all 24 hours (0-23)
                for (let hour = 0; hour < 24; hour++) {
                    const hourStr = hour.toString();
                    
                    // Simulate realistic patterns
                    let baseRating = 3.0;
                    if (hour >= 6 && hour <= 8) baseRating = 4.0; // Good morning conditions
                    if (hour >= 12 && hour <= 14) baseRating = 2.5; // Windy noon
                    if (hour >= 18 && hour <= 20) baseRating = 3.5; // Nice evening
                    if (hour >= 0 && hour <= 5) baseRating = 3.8; // Calm night/early morning
                    if (hour >= 21 && hour <= 23) baseRating = 3.2; // Late evening
                    
                    // Add some variation
                    const variation = (Math.random() - 0.5) * 1.0;
                    const finalRating = Math.max(1.0, Math.min(5.0, baseRating + variation));
                    
                    // Generate warnings for certain conditions
                    const warnings = [];
                    if (hour >= 12 && hour <= 15 && Math.random() > 0.5) {
                        warnings.push("CAUTION: Moderate winds - intermediate+ skills required");
                    }
                    if (hour >= 11 && hour <= 16 && Math.random() > 0.7) {
                        warnings.push("WARNING: High UV - sun protection essential");
                    }
                    
                    hourlyData[hourStr] = {
                        temperature: 20 + Math.sin((hour - 6) * Math.PI / 12) * 8 + Math.random() * 3,
                        windSpeed: 8 + Math.sin((hour - 12) * Math.PI / 6) * 6 + Math.random() * 4,
                        windDirection: ['N', 'NE', 'E', 'SE', 'S', 'SW', 'W', 'NW'][hour % 8],
                        gustSpeed: 5 + Math.random() * 10,
                        humidity: 40 + Math.random() * 40,
                        cloudCover: Math.random() * 100,
                        uvIndex: Math.max(0, 8 * Math.sin((hour - 6) * Math.PI / 12) + Math.random() * 2),
                        visibility: 8 + Math.random() * 4,
                        hasWarnings: warnings.length > 0,
                        warnings: warnings,
                        beaufortScale: Math.floor(Math.random() * 6) + 1,
                        rating: finalRating,
                        mlModelUsed: true,
                        predictionSource: 'ml-model'
                    };
                }
                
                forecastData.push({
                    date: date.toISOString().split('T')[0],
                    hourly: hourlyData
                });
            }
            
            return forecastData;
        }
        
        // Test the heatmap with 24-hour data
        function testHeatmap() {
            const heatmap = new Heatmap();
            const testData = generate24HourData();
            
            console.log('ðŸ§ª Testing heatmap with 24-hour data:');
            console.log('Days:', testData.length);
            console.log('Hours per day:', Object.keys(testData[0].hourly).length);
            console.log('Sample day data:', testData[0]);
            
            const heatmapElement = heatmap.render(testData);
            document.getElementById('heatmapContainer').appendChild(heatmapElement);
            
            console.log('âœ… Heatmap rendered successfully!');
        }
        
        // Run test when page loads
        testHeatmap();
    </script>
</body>
</html>
